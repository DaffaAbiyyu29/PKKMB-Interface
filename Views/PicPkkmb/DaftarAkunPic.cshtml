@{
	Layout = "_Layout";
}

<div class="row justify-content-center mb-5">
	<div class="col-lg-5 text-center">
		<div class="card">
			<h5 class="card-header white-text py-4" style="background-color: #0059AB;">
				<strong>Daftar Akun PIC PKKMB</strong>
			</h5>
			<div class="card-body px-lg-5 pt-0 my-1">
				<div class="md-form">
					<input type="text" class="form-control" MaxLength="30" placeholder="NPK" name="pic_npk" id="pic_npk">
				</div>
				<div class="md-form">
					<input type="text" class="form-control" MaxLength="30" placeholder="Nama Lengkap" name="pic_namalengkap" id="pic_namalengkap">
				</div>
				<div class="md-form">
					<input type="password" class="form-control" placeholder="Kata Sandi" name="pic_password" id="pic_password">
				</div>
				<div class="md-form">
					<input type="password" class="form-control" placeholder="Ketik Ulang Kata Sandi" name="pic_password_key" id="pic_password_key">
				</div>
				<button class="btn btn-rounded btn-block my-4 white-text font-weight-bold waves-effect z-depth-0" Style="background-color: #0059AB;" onclick="daftarpic(event)">Daftar</button>
				<p>
					Sudah Memiliki Akun? <a asp-controller="pic" asp-action="Loginpic" class="font-weight-bold">Klik Disini</a>
				</p>
			</div>
		</div>
	</div>
</div>


<script>
	function daftarpic(event) {
		event.preventDefault();

		var pic_npk = document.getElementById("pic_npk").value;
		var pic_namalengkap = document.getElementById("pic_namalengkap").value;
		var pic_password = document.getElementById("pic_password").value;
		var pic_password_key = document.getElementById("pic_password_key").value;

		if (pic_password == pic_password_key) {
			var hostname = "https://localhost:7087/";
			var url = hostname + "daftarpic";
			var method = "POST";
			var input = {
				pic_npk: pic_npk,
				pic_namalengkap: pic_namalengkap,
				pic_password: pic_password,
			};
			var data = JSON.stringify(input);

			$.ajax({
				url: url,
				method: method,
				data: data,
				contentType: "application/json",
				success: function (data) {
					alert("Akun Berhasil Terbuat");
					window.location.href = '.'; // Redirect to the desired URL
				},
				error: function (xhr, status, error) {
					console.error("AJAX request error:", status, error);
					console.log("Server response:", xhr.responseText);
				},
			});
		} else {
			alert("Kata Sandi Tidak Cocok!");
		}
	}
</script>
